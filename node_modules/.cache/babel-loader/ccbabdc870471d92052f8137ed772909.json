{"ast":null,"code":"import React$1, { useState, useRef, useCallback, useEffect, Children } from 'react';\nimport { objectWithoutProperties as _objectWithoutProperties } from '../../_virtual/_rollupPluginBabelHelpers.js';\nimport { useUniqueId } from '../../utilities/unique-id/hooks.js';\nimport { portal } from '../shared.js';\nimport { findFirstFocusableNodeIncludingDisabled, focusNextFocusableNode } from '../../utilities/focus.js';\nimport { Portal as Portal$1 } from '../Portal/Portal.js';\nimport { Section as Section$1 } from './components/Section/Section.js';\nimport { Pane as Pane$1 } from './components/Pane/Pane.js';\nimport { PopoverOverlay as PopoverOverlay$1, PopoverCloseSource } from './components/PopoverOverlay/PopoverOverlay.js';\nexport { PopoverCloseSource } from './components/PopoverOverlay/PopoverOverlay.js';\nimport { setActivatorAttributes as setActivatorAttributes$1 } from './set-activator-attributes.js'; // TypeScript can't generate types that correctly infer the typing of\n// subcomponents so explicitly state the subcomponents in the type definition.\n// Letting this be implicit works in this project but fails in projects that use\n// generated *.d.ts files.\n\nconst Popover = function Popover(_ref) {\n  let {\n    activatorWrapper = 'div',\n    children,\n    onClose,\n    activator,\n    preventFocusOnClose,\n    active,\n    fixed,\n    ariaHaspopup,\n    preferInputActivator = true,\n    colorScheme,\n    zIndexOverride\n  } = _ref,\n      rest = _objectWithoutProperties(_ref, [\"activatorWrapper\", \"children\", \"onClose\", \"activator\", \"preventFocusOnClose\", \"active\", \"fixed\", \"ariaHaspopup\", \"preferInputActivator\", \"colorScheme\", \"zIndexOverride\"]);\n\n  const [activatorNode, setActivatorNode] = useState();\n  const activatorContainer = useRef(null);\n  const WrapperComponent = activatorWrapper;\n  const id = useUniqueId('popover');\n  const setAccessibilityAttributes = useCallback(() => {\n    if (activatorContainer.current == null) {\n      return;\n    }\n\n    const firstFocusable = findFirstFocusableNodeIncludingDisabled(activatorContainer.current);\n    const focusableActivator = firstFocusable || activatorContainer.current;\n    const activatorDisabled = 'disabled' in focusableActivator && Boolean(focusableActivator.disabled);\n    setActivatorAttributes$1(focusableActivator, {\n      id,\n      active,\n      ariaHaspopup,\n      activatorDisabled\n    });\n  }, [id, active, ariaHaspopup]);\n\n  const handleClose = source => {\n    onClose(source);\n\n    if (activatorContainer.current == null || preventFocusOnClose) {\n      return;\n    }\n\n    if ((source === PopoverCloseSource.FocusOut || source === PopoverCloseSource.EscapeKeypress) && activatorNode) {\n      const focusableActivator = findFirstFocusableNodeIncludingDisabled(activatorNode) || findFirstFocusableNodeIncludingDisabled(activatorContainer.current) || activatorContainer.current;\n\n      if (!focusNextFocusableNode(focusableActivator, isInPortal)) {\n        focusableActivator.focus();\n      }\n    }\n  };\n\n  useEffect(() => {\n    if (!activatorNode && activatorContainer.current) {\n      setActivatorNode(activatorContainer.current.firstElementChild);\n    } else if (activatorNode && activatorContainer.current && !activatorContainer.current.contains(activatorNode)) {\n      setActivatorNode(activatorContainer.current.firstElementChild);\n    }\n\n    setAccessibilityAttributes();\n  }, [activatorNode, setAccessibilityAttributes]);\n  useEffect(() => {\n    if (activatorNode && activatorContainer.current) {\n      setActivatorNode(activatorContainer.current.firstElementChild);\n    }\n\n    setAccessibilityAttributes();\n  }, [activatorNode, setAccessibilityAttributes]);\n  const portal = activatorNode ? /*#__PURE__*/React$1.createElement(Portal$1, {\n    idPrefix: \"popover\"\n  }, /*#__PURE__*/React$1.createElement(PopoverOverlay$1, Object.assign({\n    id: id,\n    activator: activatorNode,\n    preferInputActivator: preferInputActivator,\n    onClose: handleClose,\n    active: active,\n    fixed: fixed,\n    colorScheme: colorScheme,\n    zIndexOverride: zIndexOverride\n  }, rest), children)) : null;\n  return /*#__PURE__*/React$1.createElement(WrapperComponent, {\n    ref: activatorContainer\n  }, Children.only(activator), portal);\n};\n\nfunction isInPortal(element) {\n  let parentElement = element.parentElement;\n\n  while (parentElement) {\n    if (parentElement.matches(portal.selector)) return false;\n    parentElement = parentElement.parentElement;\n  }\n\n  return true;\n}\n\nPopover.Pane = Pane$1;\nPopover.Section = Section$1;\nexport { Popover };","map":{"version":3,"sources":["/Users/yewonkwak/Documents/GitHub/spacestagram/node_modules/@shopify/polaris/dist/esm/components/Popover/Popover.js"],"names":["React$1","useState","useRef","useCallback","useEffect","Children","objectWithoutProperties","_objectWithoutProperties","useUniqueId","portal","findFirstFocusableNodeIncludingDisabled","focusNextFocusableNode","Portal","Portal$1","Section","Section$1","Pane","Pane$1","PopoverOverlay","PopoverOverlay$1","PopoverCloseSource","setActivatorAttributes","setActivatorAttributes$1","Popover","_ref","activatorWrapper","children","onClose","activator","preventFocusOnClose","active","fixed","ariaHaspopup","preferInputActivator","colorScheme","zIndexOverride","rest","activatorNode","setActivatorNode","activatorContainer","WrapperComponent","id","setAccessibilityAttributes","current","firstFocusable","focusableActivator","activatorDisabled","Boolean","disabled","handleClose","source","FocusOut","EscapeKeypress","isInPortal","focus","firstElementChild","contains","createElement","idPrefix","Object","assign","ref","only","element","parentElement","matches","selector"],"mappings":"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","sourcesContent":["import React$1, { useState, useRef, useCallback, useEffect, Children } from 'react';\nimport { objectWithoutProperties as _objectWithoutProperties } from '../../_virtual/_rollupPluginBabelHelpers.js';\nimport { useUniqueId } from '../../utilities/unique-id/hooks.js';\nimport { portal } from '../shared.js';\nimport { findFirstFocusableNodeIncludingDisabled, focusNextFocusableNode } from '../../utilities/focus.js';\nimport { Portal as Portal$1 } from '../Portal/Portal.js';\nimport { Section as Section$1 } from './components/Section/Section.js';\nimport { Pane as Pane$1 } from './components/Pane/Pane.js';\nimport { PopoverOverlay as PopoverOverlay$1, PopoverCloseSource } from './components/PopoverOverlay/PopoverOverlay.js';\nexport { PopoverCloseSource } from './components/PopoverOverlay/PopoverOverlay.js';\nimport { setActivatorAttributes as setActivatorAttributes$1 } from './set-activator-attributes.js';\n\n// TypeScript can't generate types that correctly infer the typing of\n// subcomponents so explicitly state the subcomponents in the type definition.\n// Letting this be implicit works in this project but fails in projects that use\n// generated *.d.ts files.\nconst Popover = function Popover(_ref) {\n  let {\n    activatorWrapper = 'div',\n    children,\n    onClose,\n    activator,\n    preventFocusOnClose,\n    active,\n    fixed,\n    ariaHaspopup,\n    preferInputActivator = true,\n    colorScheme,\n    zIndexOverride\n  } = _ref,\n      rest = _objectWithoutProperties(_ref, [\"activatorWrapper\", \"children\", \"onClose\", \"activator\", \"preventFocusOnClose\", \"active\", \"fixed\", \"ariaHaspopup\", \"preferInputActivator\", \"colorScheme\", \"zIndexOverride\"]);\n\n  const [activatorNode, setActivatorNode] = useState();\n  const activatorContainer = useRef(null);\n  const WrapperComponent = activatorWrapper;\n  const id = useUniqueId('popover');\n  const setAccessibilityAttributes = useCallback(() => {\n    if (activatorContainer.current == null) {\n      return;\n    }\n\n    const firstFocusable = findFirstFocusableNodeIncludingDisabled(activatorContainer.current);\n    const focusableActivator = firstFocusable || activatorContainer.current;\n    const activatorDisabled = 'disabled' in focusableActivator && Boolean(focusableActivator.disabled);\n    setActivatorAttributes$1(focusableActivator, {\n      id,\n      active,\n      ariaHaspopup,\n      activatorDisabled\n    });\n  }, [id, active, ariaHaspopup]);\n\n  const handleClose = source => {\n    onClose(source);\n\n    if (activatorContainer.current == null || preventFocusOnClose) {\n      return;\n    }\n\n    if ((source === PopoverCloseSource.FocusOut || source === PopoverCloseSource.EscapeKeypress) && activatorNode) {\n      const focusableActivator = findFirstFocusableNodeIncludingDisabled(activatorNode) || findFirstFocusableNodeIncludingDisabled(activatorContainer.current) || activatorContainer.current;\n\n      if (!focusNextFocusableNode(focusableActivator, isInPortal)) {\n        focusableActivator.focus();\n      }\n    }\n  };\n\n  useEffect(() => {\n    if (!activatorNode && activatorContainer.current) {\n      setActivatorNode(activatorContainer.current.firstElementChild);\n    } else if (activatorNode && activatorContainer.current && !activatorContainer.current.contains(activatorNode)) {\n      setActivatorNode(activatorContainer.current.firstElementChild);\n    }\n\n    setAccessibilityAttributes();\n  }, [activatorNode, setAccessibilityAttributes]);\n  useEffect(() => {\n    if (activatorNode && activatorContainer.current) {\n      setActivatorNode(activatorContainer.current.firstElementChild);\n    }\n\n    setAccessibilityAttributes();\n  }, [activatorNode, setAccessibilityAttributes]);\n  const portal = activatorNode ? /*#__PURE__*/React$1.createElement(Portal$1, {\n    idPrefix: \"popover\"\n  }, /*#__PURE__*/React$1.createElement(PopoverOverlay$1, Object.assign({\n    id: id,\n    activator: activatorNode,\n    preferInputActivator: preferInputActivator,\n    onClose: handleClose,\n    active: active,\n    fixed: fixed,\n    colorScheme: colorScheme,\n    zIndexOverride: zIndexOverride\n  }, rest), children)) : null;\n  return /*#__PURE__*/React$1.createElement(WrapperComponent, {\n    ref: activatorContainer\n  }, Children.only(activator), portal);\n};\n\nfunction isInPortal(element) {\n  let parentElement = element.parentElement;\n\n  while (parentElement) {\n    if (parentElement.matches(portal.selector)) return false;\n    parentElement = parentElement.parentElement;\n  }\n\n  return true;\n}\n\nPopover.Pane = Pane$1;\nPopover.Section = Section$1;\n\nexport { Popover };\n"]},"metadata":{},"sourceType":"module"}