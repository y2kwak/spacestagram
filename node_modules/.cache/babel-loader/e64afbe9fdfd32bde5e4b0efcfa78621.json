{"ast":null,"code":"import { Key } from '../../../../types.js';\nimport React$1, { useContext, useState, useEffect, useCallback } from 'react';\nimport { objectWithoutProperties as _objectWithoutProperties } from '../../../../_virtual/_rollupPluginBabelHelpers.js';\nimport { useMediaQuery } from '../../../../utilities/media-query/hooks.js';\nimport { useUniqueId } from '../../../../utilities/unique-id/hooks.js';\nimport { useI18n } from '../../../../utilities/i18n/hooks.js';\nimport { classNames } from '../../../../utilities/css.js';\nimport { Icon as Icon$1 } from '../../../Icon/Icon.js';\nimport { UnstyledLink as UnstyledLink$1 } from '../../../UnstyledLink/UnstyledLink.js';\nimport { Badge as Badge$1 } from '../../../Badge/Badge.js';\nimport { Indicator as Indicator$1 } from '../../../Indicator/Indicator.js';\nimport { NavigationContext } from '../../context.js';\nimport styles from '../../Navigation.scss.js';\nimport { Secondary as Secondary$1 } from './components/Secondary/Secondary.js';\nvar MatchState;\n\n(function (MatchState) {\n  MatchState[MatchState[\"MatchForced\"] = 0] = \"MatchForced\";\n  MatchState[MatchState[\"MatchUrl\"] = 1] = \"MatchUrl\";\n  MatchState[MatchState[\"MatchPaths\"] = 2] = \"MatchPaths\";\n  MatchState[MatchState[\"Excluded\"] = 3] = \"Excluded\";\n  MatchState[MatchState[\"NoMatch\"] = 4] = \"NoMatch\";\n})(MatchState || (MatchState = {}));\n\nvar _ref = /*#__PURE__*/React$1.createElement(Indicator$1, {\n  pulse: true\n});\n\nfunction Item(_ref2) {\n  let {\n    url,\n    icon,\n    label,\n    subNavigationItems = [],\n    secondaryAction,\n    disabled,\n    onClick,\n    accessibilityLabel,\n    selected: selectedOverride,\n    badge,\n    new: isNew,\n    matches,\n    exactMatch,\n    matchPaths,\n    excludePaths\n  } = _ref2;\n  const i18n = useI18n();\n  const {\n    isNavigationCollapsed\n  } = useMediaQuery();\n  const secondaryNavigationId = useUniqueId('SecondaryNavigation');\n  const {\n    location,\n    onNavigationDismiss\n  } = useContext(NavigationContext);\n  const [expanded, setExpanded] = useState(false);\n  const [keyFocused, setKeyFocused] = useState(false);\n  useEffect(() => {\n    if (!isNavigationCollapsed && expanded) {\n      setExpanded(false);\n    }\n  }, [expanded, isNavigationCollapsed]);\n  const handleKeyUp = useCallback(event => {\n    if (event.keyCode === Key.Tab) {\n      !keyFocused && setKeyFocused(true);\n    }\n  }, [keyFocused]);\n  const handleBlur = useCallback(() => {\n    keyFocused && setKeyFocused(false);\n  }, [keyFocused]);\n  const tabIndex = disabled ? -1 : 0;\n  const hasNewChild = subNavigationItems.filter(subNavigationItem => subNavigationItem.new).length > 0;\n  const indicatorMarkup = hasNewChild ? /*#__PURE__*/React$1.createElement(\"span\", {\n    className: styles.Indicator\n  }, _ref) : null;\n  const iconMarkup = icon ? /*#__PURE__*/React$1.createElement(\"div\", {\n    className: styles.Icon\n  }, /*#__PURE__*/React$1.createElement(Icon$1, {\n    source: icon\n  })) : null;\n  let badgeMarkup = null;\n\n  if (isNew) {\n    badgeMarkup = /*#__PURE__*/React$1.createElement(Badge$1, {\n      status: \"new\",\n      size: \"small\"\n    }, i18n.translate('Polaris.Badge.STATUS_LABELS.new'));\n  } else if (typeof badge === 'string') {\n    badgeMarkup = /*#__PURE__*/React$1.createElement(Badge$1, {\n      status: \"new\",\n      size: \"small\"\n    }, badge);\n  } else {\n    badgeMarkup = badge;\n  }\n\n  const wrappedBadgeMarkup = badgeMarkup == null ? null : /*#__PURE__*/React$1.createElement(\"div\", {\n    className: styles.Badge\n  }, badgeMarkup);\n  const itemContentMarkup = /*#__PURE__*/React$1.createElement(React$1.Fragment, null, iconMarkup, /*#__PURE__*/React$1.createElement(\"span\", {\n    className: styles.Text\n  }, label, indicatorMarkup), wrappedBadgeMarkup);\n\n  if (url == null) {\n    const _className = classNames(styles.Item, disabled && styles['Item-disabled'], keyFocused && styles.keyFocused);\n\n    return /*#__PURE__*/React$1.createElement(\"li\", {\n      className: styles.ListItem\n    }, /*#__PURE__*/React$1.createElement(\"button\", {\n      type: \"button\",\n      className: _className,\n      disabled: disabled,\n      \"aria-disabled\": disabled,\n      \"aria-label\": accessibilityLabel,\n      onClick: getClickHandler(onClick),\n      onKeyUp: handleKeyUp,\n      onBlur: handleBlur\n    }, itemContentMarkup));\n  }\n\n  const secondaryActionMarkup = secondaryAction && /*#__PURE__*/React$1.createElement(UnstyledLink$1, {\n    external: true,\n    url: secondaryAction.url,\n    className: styles.SecondaryAction,\n    tabIndex: tabIndex,\n    \"aria-disabled\": disabled,\n    \"aria-label\": secondaryAction.accessibilityLabel\n  }, /*#__PURE__*/React$1.createElement(Icon$1, {\n    source: secondaryAction.icon\n  }));\n  const matchState = matchStateForItem({\n    url,\n    matches,\n    exactMatch,\n    matchPaths,\n    excludePaths\n  }, location);\n  const matchingSubNavigationItems = subNavigationItems.filter(item => {\n    const subMatchState = matchStateForItem(item, location);\n    return subMatchState === MatchState.MatchForced || subMatchState === MatchState.MatchUrl || subMatchState === MatchState.MatchPaths;\n  });\n  const childIsActive = matchingSubNavigationItems.length > 0;\n  const selected = selectedOverride == null ? matchState === MatchState.MatchForced || matchState === MatchState.MatchUrl || matchState === MatchState.MatchPaths : selectedOverride;\n  const showExpanded = selected || expanded || childIsActive;\n  const itemClassName = classNames(styles.Item, disabled && styles['Item-disabled'], selected && subNavigationItems.length === 0 && styles['Item-selected'], showExpanded && styles.subNavigationActive, keyFocused && styles.keyFocused);\n  let secondaryNavigationMarkup = null;\n\n  if (subNavigationItems.length > 0) {\n    const longestMatch = matchingSubNavigationItems.sort((_ref3, _ref4) => {\n      let {\n        url: firstUrl\n      } = _ref3;\n      let {\n        url: secondUrl\n      } = _ref4;\n      return secondUrl.length - firstUrl.length;\n    })[0];\n    const SecondaryNavigationClassName = classNames(styles.SecondaryNavigation, showExpanded && styles.isExpanded, !icon && styles['SecondaryNavigation-noIcon']);\n    secondaryNavigationMarkup = /*#__PURE__*/React$1.createElement(\"div\", {\n      className: SecondaryNavigationClassName\n    }, /*#__PURE__*/React$1.createElement(Secondary$1, {\n      expanded: showExpanded,\n      id: secondaryNavigationId\n    }, subNavigationItems.map(item => {\n      const {\n        label\n      } = item,\n            rest = _objectWithoutProperties(item, [\"label\"]);\n\n      return /*#__PURE__*/React$1.createElement(Item, Object.assign({}, rest, {\n        key: label,\n        label: label,\n        matches: item === longestMatch,\n        onClick: onNavigationDismiss\n      }));\n    })));\n  }\n\n  const className = classNames(styles.ListItem, secondaryAction && styles['ListItem-hasAction']);\n  return /*#__PURE__*/React$1.createElement(\"li\", {\n    className: className\n  }, /*#__PURE__*/React$1.createElement(\"div\", {\n    className: styles.ItemWrapper\n  }, /*#__PURE__*/React$1.createElement(UnstyledLink$1, Object.assign({\n    url: url,\n    className: itemClassName,\n    tabIndex: tabIndex,\n    \"aria-disabled\": disabled,\n    \"aria-label\": accessibilityLabel,\n    onClick: getClickHandler(onClick),\n    onKeyUp: handleKeyUp,\n    onBlur: handleBlur\n  }, normalizeAriaAttributes(secondaryNavigationId, subNavigationItems.length > 0, showExpanded)), itemContentMarkup), secondaryActionMarkup), secondaryNavigationMarkup);\n\n  function getClickHandler(onClick) {\n    return event => {\n      const {\n        currentTarget\n      } = event;\n\n      if (currentTarget.getAttribute('href') === location) {\n        event.preventDefault();\n      }\n\n      if (subNavigationItems && subNavigationItems.length > 0 && isNavigationCollapsed) {\n        event.preventDefault();\n        setExpanded(!expanded);\n      } else if (onNavigationDismiss) {\n        onNavigationDismiss();\n\n        if (onClick && onClick !== onNavigationDismiss) {\n          onClick();\n        }\n\n        return;\n      }\n\n      if (onClick) {\n        onClick();\n      }\n    };\n  }\n}\n\nfunction isNavigationItemActive(navigationItem, currentPath) {\n  const matchState = matchStateForItem(navigationItem, currentPath);\n  const matchingSubNavigationItems = navigationItem.subNavigationItems && navigationItem.subNavigationItems.filter(item => {\n    const subMatchState = matchStateForItem(item, currentPath);\n    return subMatchState === MatchState.MatchForced || subMatchState === MatchState.MatchUrl || subMatchState === MatchState.MatchPaths;\n  });\n  const childIsActive = matchingSubNavigationItems && matchingSubNavigationItems.length > 0;\n  const selected = matchState === MatchState.MatchForced || matchState === MatchState.MatchUrl || matchState === MatchState.MatchPaths;\n  return selected || childIsActive;\n}\n\nfunction normalizePathname(pathname) {\n  const barePathname = pathname.split('?')[0].split('#')[0];\n  return barePathname.endsWith('/') ? barePathname : `${barePathname}/`;\n}\n\nfunction safeEqual(location, path) {\n  return normalizePathname(location) === normalizePathname(path);\n}\n\nfunction safeStartsWith(location, path) {\n  return normalizePathname(location).startsWith(normalizePathname(path));\n}\n\nfunction matchStateForItem(_ref5, location) {\n  let {\n    url,\n    matches,\n    exactMatch,\n    matchPaths,\n    excludePaths\n  } = _ref5;\n\n  if (url == null) {\n    return MatchState.NoMatch;\n  }\n\n  if (matches) {\n    return MatchState.MatchForced;\n  }\n\n  if (matches === false || excludePaths && excludePaths.some(path => safeStartsWith(location, path))) {\n    return MatchState.Excluded;\n  }\n\n  if (matchPaths && matchPaths.some(path => safeStartsWith(location, path))) {\n    return MatchState.MatchPaths;\n  }\n\n  const matchesUrl = exactMatch ? safeEqual(location, url) : safeStartsWith(location, url);\n  return matchesUrl ? MatchState.MatchUrl : MatchState.NoMatch;\n}\n\nfunction normalizeAriaAttributes(controlId, hasSubMenu, expanded) {\n  return hasSubMenu ? {\n    'aria-expanded': expanded,\n    'aria-controls': controlId\n  } : undefined;\n}\n\nexport { Item, isNavigationItemActive };","map":{"version":3,"sources":["/Users/yewonkwak/Documents/GitHub/spacestagram/node_modules/@shopify/polaris/dist/esm/components/Navigation/components/Item/Item.js"],"names":["Key","React$1","useContext","useState","useEffect","useCallback","objectWithoutProperties","_objectWithoutProperties","useMediaQuery","useUniqueId","useI18n","classNames","Icon","Icon$1","UnstyledLink","UnstyledLink$1","Badge","Badge$1","Indicator","Indicator$1","NavigationContext","styles","Secondary","Secondary$1","MatchState","_ref","createElement","pulse","Item","url","icon","label","subNavigationItems","secondaryAction","disabled","onClick","accessibilityLabel","selected","selectedOverride","badge","new","isNew","matches","exactMatch","matchPaths","excludePaths","i18n","isNavigationCollapsed","secondaryNavigationId","location","onNavigationDismiss","expanded","setExpanded","keyFocused","setKeyFocused","handleKeyUp","event","keyCode","Tab","handleBlur","tabIndex","hasNewChild","filter","subNavigationItem","length","indicatorMarkup","className","iconMarkup","source","badgeMarkup","status","size","translate","wrappedBadgeMarkup","itemContentMarkup","Fragment","Text","_className","ListItem","type","getClickHandler","onKeyUp","onBlur","secondaryActionMarkup","external","SecondaryAction","matchState","matchStateForItem","matchingSubNavigationItems","item","subMatchState","MatchForced","MatchUrl","MatchPaths","childIsActive","showExpanded","itemClassName","subNavigationActive","secondaryNavigationMarkup","longestMatch","sort","firstUrl","secondUrl","SecondaryNavigationClassName","SecondaryNavigation","isExpanded","id","map","rest","Object","assign","key","ItemWrapper","normalizeAriaAttributes","currentTarget","getAttribute","preventDefault","isNavigationItemActive","navigationItem","currentPath","normalizePathname","pathname","barePathname","split","endsWith","safeEqual","path","safeStartsWith","startsWith","NoMatch","some","Excluded","matchesUrl","controlId","hasSubMenu","undefined"],"mappings":"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","sourcesContent":["import { Key } from '../../../../types.js';\nimport React$1, { useContext, useState, useEffect, useCallback } from 'react';\nimport { objectWithoutProperties as _objectWithoutProperties } from '../../../../_virtual/_rollupPluginBabelHelpers.js';\nimport { useMediaQuery } from '../../../../utilities/media-query/hooks.js';\nimport { useUniqueId } from '../../../../utilities/unique-id/hooks.js';\nimport { useI18n } from '../../../../utilities/i18n/hooks.js';\nimport { classNames } from '../../../../utilities/css.js';\nimport { Icon as Icon$1 } from '../../../Icon/Icon.js';\nimport { UnstyledLink as UnstyledLink$1 } from '../../../UnstyledLink/UnstyledLink.js';\nimport { Badge as Badge$1 } from '../../../Badge/Badge.js';\nimport { Indicator as Indicator$1 } from '../../../Indicator/Indicator.js';\nimport { NavigationContext } from '../../context.js';\nimport styles from '../../Navigation.scss.js';\nimport { Secondary as Secondary$1 } from './components/Secondary/Secondary.js';\n\nvar MatchState;\n\n(function (MatchState) {\n  MatchState[MatchState[\"MatchForced\"] = 0] = \"MatchForced\";\n  MatchState[MatchState[\"MatchUrl\"] = 1] = \"MatchUrl\";\n  MatchState[MatchState[\"MatchPaths\"] = 2] = \"MatchPaths\";\n  MatchState[MatchState[\"Excluded\"] = 3] = \"Excluded\";\n  MatchState[MatchState[\"NoMatch\"] = 4] = \"NoMatch\";\n})(MatchState || (MatchState = {}));\n\nvar _ref = /*#__PURE__*/React$1.createElement(Indicator$1, {\n  pulse: true\n});\n\nfunction Item({\n  url,\n  icon,\n  label,\n  subNavigationItems = [],\n  secondaryAction,\n  disabled,\n  onClick,\n  accessibilityLabel,\n  selected: selectedOverride,\n  badge,\n  new: isNew,\n  matches,\n  exactMatch,\n  matchPaths,\n  excludePaths\n}) {\n  const i18n = useI18n();\n  const {\n    isNavigationCollapsed\n  } = useMediaQuery();\n  const secondaryNavigationId = useUniqueId('SecondaryNavigation');\n  const {\n    location,\n    onNavigationDismiss\n  } = useContext(NavigationContext);\n  const [expanded, setExpanded] = useState(false);\n  const [keyFocused, setKeyFocused] = useState(false);\n  useEffect(() => {\n    if (!isNavigationCollapsed && expanded) {\n      setExpanded(false);\n    }\n  }, [expanded, isNavigationCollapsed]);\n  const handleKeyUp = useCallback(event => {\n    if (event.keyCode === Key.Tab) {\n      !keyFocused && setKeyFocused(true);\n    }\n  }, [keyFocused]);\n  const handleBlur = useCallback(() => {\n    keyFocused && setKeyFocused(false);\n  }, [keyFocused]);\n  const tabIndex = disabled ? -1 : 0;\n  const hasNewChild = subNavigationItems.filter(subNavigationItem => subNavigationItem.new).length > 0;\n  const indicatorMarkup = hasNewChild ? /*#__PURE__*/React$1.createElement(\"span\", {\n    className: styles.Indicator\n  }, _ref) : null;\n  const iconMarkup = icon ? /*#__PURE__*/React$1.createElement(\"div\", {\n    className: styles.Icon\n  }, /*#__PURE__*/React$1.createElement(Icon$1, {\n    source: icon\n  })) : null;\n  let badgeMarkup = null;\n\n  if (isNew) {\n    badgeMarkup = /*#__PURE__*/React$1.createElement(Badge$1, {\n      status: \"new\",\n      size: \"small\"\n    }, i18n.translate('Polaris.Badge.STATUS_LABELS.new'));\n  } else if (typeof badge === 'string') {\n    badgeMarkup = /*#__PURE__*/React$1.createElement(Badge$1, {\n      status: \"new\",\n      size: \"small\"\n    }, badge);\n  } else {\n    badgeMarkup = badge;\n  }\n\n  const wrappedBadgeMarkup = badgeMarkup == null ? null : /*#__PURE__*/React$1.createElement(\"div\", {\n    className: styles.Badge\n  }, badgeMarkup);\n  const itemContentMarkup = /*#__PURE__*/React$1.createElement(React$1.Fragment, null, iconMarkup, /*#__PURE__*/React$1.createElement(\"span\", {\n    className: styles.Text\n  }, label, indicatorMarkup), wrappedBadgeMarkup);\n\n  if (url == null) {\n    const _className = classNames(styles.Item, disabled && styles['Item-disabled'], keyFocused && styles.keyFocused);\n\n    return /*#__PURE__*/React$1.createElement(\"li\", {\n      className: styles.ListItem\n    }, /*#__PURE__*/React$1.createElement(\"button\", {\n      type: \"button\",\n      className: _className,\n      disabled: disabled,\n      \"aria-disabled\": disabled,\n      \"aria-label\": accessibilityLabel,\n      onClick: getClickHandler(onClick),\n      onKeyUp: handleKeyUp,\n      onBlur: handleBlur\n    }, itemContentMarkup));\n  }\n\n  const secondaryActionMarkup = secondaryAction && /*#__PURE__*/React$1.createElement(UnstyledLink$1, {\n    external: true,\n    url: secondaryAction.url,\n    className: styles.SecondaryAction,\n    tabIndex: tabIndex,\n    \"aria-disabled\": disabled,\n    \"aria-label\": secondaryAction.accessibilityLabel\n  }, /*#__PURE__*/React$1.createElement(Icon$1, {\n    source: secondaryAction.icon\n  }));\n  const matchState = matchStateForItem({\n    url,\n    matches,\n    exactMatch,\n    matchPaths,\n    excludePaths\n  }, location);\n  const matchingSubNavigationItems = subNavigationItems.filter(item => {\n    const subMatchState = matchStateForItem(item, location);\n    return subMatchState === MatchState.MatchForced || subMatchState === MatchState.MatchUrl || subMatchState === MatchState.MatchPaths;\n  });\n  const childIsActive = matchingSubNavigationItems.length > 0;\n  const selected = selectedOverride == null ? matchState === MatchState.MatchForced || matchState === MatchState.MatchUrl || matchState === MatchState.MatchPaths : selectedOverride;\n  const showExpanded = selected || expanded || childIsActive;\n  const itemClassName = classNames(styles.Item, disabled && styles['Item-disabled'], selected && subNavigationItems.length === 0 && styles['Item-selected'], showExpanded && styles.subNavigationActive, keyFocused && styles.keyFocused);\n  let secondaryNavigationMarkup = null;\n\n  if (subNavigationItems.length > 0) {\n    const longestMatch = matchingSubNavigationItems.sort(({\n      url: firstUrl\n    }, {\n      url: secondUrl\n    }) => secondUrl.length - firstUrl.length)[0];\n    const SecondaryNavigationClassName = classNames(styles.SecondaryNavigation, showExpanded && styles.isExpanded, !icon && styles['SecondaryNavigation-noIcon']);\n    secondaryNavigationMarkup = /*#__PURE__*/React$1.createElement(\"div\", {\n      className: SecondaryNavigationClassName\n    }, /*#__PURE__*/React$1.createElement(Secondary$1, {\n      expanded: showExpanded,\n      id: secondaryNavigationId\n    }, subNavigationItems.map(item => {\n      const {\n        label\n      } = item,\n            rest = _objectWithoutProperties(item, [\"label\"]);\n\n      return /*#__PURE__*/React$1.createElement(Item, Object.assign({}, rest, {\n        key: label,\n        label: label,\n        matches: item === longestMatch,\n        onClick: onNavigationDismiss\n      }));\n    })));\n  }\n\n  const className = classNames(styles.ListItem, secondaryAction && styles['ListItem-hasAction']);\n  return /*#__PURE__*/React$1.createElement(\"li\", {\n    className: className\n  }, /*#__PURE__*/React$1.createElement(\"div\", {\n    className: styles.ItemWrapper\n  }, /*#__PURE__*/React$1.createElement(UnstyledLink$1, Object.assign({\n    url: url,\n    className: itemClassName,\n    tabIndex: tabIndex,\n    \"aria-disabled\": disabled,\n    \"aria-label\": accessibilityLabel,\n    onClick: getClickHandler(onClick),\n    onKeyUp: handleKeyUp,\n    onBlur: handleBlur\n  }, normalizeAriaAttributes(secondaryNavigationId, subNavigationItems.length > 0, showExpanded)), itemContentMarkup), secondaryActionMarkup), secondaryNavigationMarkup);\n\n  function getClickHandler(onClick) {\n    return event => {\n      const {\n        currentTarget\n      } = event;\n\n      if (currentTarget.getAttribute('href') === location) {\n        event.preventDefault();\n      }\n\n      if (subNavigationItems && subNavigationItems.length > 0 && isNavigationCollapsed) {\n        event.preventDefault();\n        setExpanded(!expanded);\n      } else if (onNavigationDismiss) {\n        onNavigationDismiss();\n\n        if (onClick && onClick !== onNavigationDismiss) {\n          onClick();\n        }\n\n        return;\n      }\n\n      if (onClick) {\n        onClick();\n      }\n    };\n  }\n}\nfunction isNavigationItemActive(navigationItem, currentPath) {\n  const matchState = matchStateForItem(navigationItem, currentPath);\n  const matchingSubNavigationItems = navigationItem.subNavigationItems && navigationItem.subNavigationItems.filter(item => {\n    const subMatchState = matchStateForItem(item, currentPath);\n    return subMatchState === MatchState.MatchForced || subMatchState === MatchState.MatchUrl || subMatchState === MatchState.MatchPaths;\n  });\n  const childIsActive = matchingSubNavigationItems && matchingSubNavigationItems.length > 0;\n  const selected = matchState === MatchState.MatchForced || matchState === MatchState.MatchUrl || matchState === MatchState.MatchPaths;\n  return selected || childIsActive;\n}\n\nfunction normalizePathname(pathname) {\n  const barePathname = pathname.split('?')[0].split('#')[0];\n  return barePathname.endsWith('/') ? barePathname : `${barePathname}/`;\n}\n\nfunction safeEqual(location, path) {\n  return normalizePathname(location) === normalizePathname(path);\n}\n\nfunction safeStartsWith(location, path) {\n  return normalizePathname(location).startsWith(normalizePathname(path));\n}\n\nfunction matchStateForItem({\n  url,\n  matches,\n  exactMatch,\n  matchPaths,\n  excludePaths\n}, location) {\n  if (url == null) {\n    return MatchState.NoMatch;\n  }\n\n  if (matches) {\n    return MatchState.MatchForced;\n  }\n\n  if (matches === false || excludePaths && excludePaths.some(path => safeStartsWith(location, path))) {\n    return MatchState.Excluded;\n  }\n\n  if (matchPaths && matchPaths.some(path => safeStartsWith(location, path))) {\n    return MatchState.MatchPaths;\n  }\n\n  const matchesUrl = exactMatch ? safeEqual(location, url) : safeStartsWith(location, url);\n  return matchesUrl ? MatchState.MatchUrl : MatchState.NoMatch;\n}\n\nfunction normalizeAriaAttributes(controlId, hasSubMenu, expanded) {\n  return hasSubMenu ? {\n    'aria-expanded': expanded,\n    'aria-controls': controlId\n  } : undefined;\n}\n\nexport { Item, isNavigationItemActive };\n"]},"metadata":{},"sourceType":"module"}